{% load static %}

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>브이월드 지도</title>

    <!-- ✅ jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- ✅ jQuery UI CSS -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

    <!-- ✅ jQuery UI JS -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- ✅ VWorld API 추가 -->
    <script type="text/javascript" src="https://map.vworld.kr/js/map/OpenLayers-2.13/OpenLayers.js"></script>
    <script type="text/javascript" src="https://map.vworld.kr/js/apis.do?type=Base&apiKey=D5914E9D-71E7-3FC4-AA3B-069A239E8B7D&domain=localhost"></script>

    <!-- ✅ Django 정적 파일 -->
    <link rel="stylesheet" href="{% static 'first/css/vworldMap.css' %}" />
    <link rel="stylesheet" href="{% static 'first/css/mapFilter.css' %}" />
  </head>
  <body>
    <h2>브이월드 지도 - 데이터 필터링</h2>

    <div id="map-container">
      <div id="map">
        <div id="loading-spinner"><p>📡 데이터 불러오는 중...</p></div>
        <div id="message-box" class="message-box"></div>
        <!-- 지도 타입 변경 UI -->
        <div class="map-controls">
          <label for="mapType">지도 타입 선택</label>
          <select id="mapType" onchange="changeMapLayer()">
            <option value="Base">일반 지도</option>
            <option value="Satellite">위성 지도</option>
            <option value="White">백지도</option>
            <option value="Midnight">야간 지도</option>
          </select>
        </div>
      </div>
    </div>
    <button id="bounding-box-btn">영역 선택</button>
    <button onclick="resetMap()">초기화</button>

    <!-- ######################################################################################################### -->

    <h1>데이터 필터링</h1>

    <div class="filter-container">
      <label>네트워크 종류:</label>
      <input type="checkbox" name="tech" value="3g" /> 3G 
      <input type="checkbox" name="tech" value="4g" /> 4G 
      <input type="checkbox" name="tech" value="5g" checked /> 5G
      <br /><br />

      <label>통신사:</label>
      <input type="checkbox" name="provider" value="kt" checked /> KT 
      <input type="checkbox" name="provider" value="lgu" checked /> LGU+
      <input type="checkbox" name="provider" value="skt" checked /> SKT

      <br /><br />

      <label>기간 선택:</label>
      <input type="text" id="start_date" placeholder="시작 날짜" value="" />
      <input type="text" id="end_date" placeholder="종료 날짜" value="" />

      <br /><br />
      <button id="fetchData">데이터 가져오기</button>
    </div>


    <!-- ✅ ES6 Module 사용 -->
    <script src="{% static 'first/js/initMap.js' %}"></script>
    <script src="{% static 'first/js/mapFilter.js' %}"></script>
    <script src="{% static 'first/js/boundingBox.js' %}"></script>
    <script src="{% static 'first/js/radiusSelection.js' %}"></script>
    <script src="{% static 'first/js/updateMarkers.js' %}"></script>
    <script src="{% static 'first/js/updateMap.js' %}"></script>
  </body>
</html>
